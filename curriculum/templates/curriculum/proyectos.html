{% extends 'curriculum/base.html' %}

{% block title %}Portafolio - {{ perfil.nombres }}{% endblock %}

{% block content %}
<div class="fade-in py-12 bg-transparent text-white font-black italic uppercase">
    <div class="relative mb-20 ml-4 md:ml-0">
        <div class="absolute -left-6 top-0 h-full w-1.5 bg-gradient-to-b from-blue-500 via-purple-600 to-transparent rounded-full shadow-[0_0_15px_rgba(59,130,246,0.5)]"></div>
        
        <div class="flex flex-col">
            <h2 class="text-7xl md:text-8xl font-[900] italic uppercase tracking-tighter leading-[0.85] text-white">
                Mis
            </h2>
            <h2 class="text-7xl md:text-8xl font-[900] italic uppercase tracking-tighter leading-[0.85] text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-fuchsia-600 drop-shadow-[0_0_20px_rgba(168,85,247,0.3)]">
                Proyectos
            </h2>
            
            <div class="flex items-center gap-4 mt-6">
                <div class="h-[2px] w-12 bg-gradient-to-r from-purple-600 to-transparent"></div>
                <p class="text-[10px] md:text-xs font-bold uppercase tracking-[0.5em] text-gray-500">
                    Technical High Grade // Intelligence Archive
                </p>
            </div>
        </div>

        <div class="absolute -top-10 left-40 opacity-[0.03] select-none pointer-events-none">
            <span class="text-[12rem] font-black italic uppercase">WORK</span>
        </div>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for prod in proyectos %}
        <div class="group relative bg-[#0d0d0d] border border-white/5 rounded-[2.5rem] p-8 hover:border-purple-500/50 transition-all duration-500 shadow-2xl overflow-hidden flex flex-col h-full">
            
            <div class="absolute right-8 top-8 opacity-20 group-hover:opacity-100 transition-opacity">
                <i data-lucide="layers" class="text-blue-400" size="24"></i>
            </div>

            <div class="inline-flex items-center self-start px-3 py-1 mb-8 rounded-lg bg-white/5 border border-white/10 text-[9px] font-black uppercase tracking-widest text-blue-400">
                #{{ prod.registro_id }}
            </div>

            <h3 class="text-2xl font-black italic uppercase text-white mb-4 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-400 group-hover:to-purple-500 transition-all">
                {{ prod.nombre }}
            </h3>

            <div class="flex-grow">
                <p class="text-gray-500 text-sm font-medium leading-relaxed mb-8 border-l border-white/10 pl-4">
                    {{ prod.descripcion }}
                </p>
            </div>

            <div class="mt-auto pt-6 border-t border-white/5 flex justify-between items-end">
                <div>
                    <p class="text-[8px] font-black text-gray-600 uppercase tracking-widest mb-1">Timeline</p>
                    <p class="text-xs font-bold text-blue-400/80">{{ prod.fecha }}</p>
                </div>

                {% if prod.archivo %}
                <a href="{{ prod.archivo.url }}" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="w-12 h-12 flex items-center justify-center bg-white text-black rounded-2xl hover:bg-gradient-to-br hover:from-blue-400 hover:to-purple-600 hover:text-white transition-all transform hover:scale-110 active:scale-95 shadow-lg"
                   title="Abrir en nueva pestaÃ±a">
                    <i data-lucide="file-text" size="20"></i>
                </a>
                {% else %}
                <div class="w-12 h-12 flex items-center justify-center bg-white/5 text-gray-700 rounded-2xl border border-dashed border-white/10">
                    <i data-lucide="lock" size="18"></i>
                </div>
                {% endif %}
            </div>

            <div class="absolute -bottom-10 -right-10 w-32 h-32 bg-purple-600/10 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div>
        </div>
        {% empty %}
        <div class="col-span-full py-20 text-center border-2 border-dashed border-white/5 rounded-[3rem]">
            <p class="text-gray-600 font-bold uppercase tracking-[0.3em] text-xs">No records found in current archive</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}